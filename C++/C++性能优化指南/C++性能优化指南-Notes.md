# C++性能优化指南

章节划分

* 第 1 章：优化概述；对性能优化的简要概述
* 第 2 章：影响优化的计算机行为；针对计算机硬件对应的优化

## 1. 优化概述

### 1.1 使用好的编译器

* 针对不同的操作系统使用不同的编译器，不同编译器会进行不同的代码优化
* 使用支持 C++ 11 以上的编译器，新的语言特性（右值，移动语义等）会使提高代码的性能
* 使用编译选项，可以让编译器对代码进行优化

### 1.2 使用更好的算法

* 同样的功能性能更好的算法对提高程序性能有很大的影响（如排序算法中的归并算法的性能）

### 1.3 使用更好的库

* C++ 标准库，以及一些好的开源库，会提供很多优秀的函数和类等（Boost，Google Code等开源库）

### 1.4 减少内存的分配和复制

* 内存调用的开销很高，远高于计算所消耗的性能，每次调用内存管理需要数千个指令，因此减少内存的调用可以调高代码的性能
* 缓存复制的调用函数一次调用会消耗数千的CPU周期，复制同样与内存有关，因此减少复制也可以提高代码性能；复制往往出现在构造函数、赋值运算符、输入输出

### 1.5 移除计算

* 在单条C++语句开销很小，如果在for循环中增加计算或者函数调用，将大大增加性能的开销

### 1.6 使用更好的数据结构

* 插入、迭代、排序和检索元素的算法运行时间取决于操作的数据结构，不同的数据结构，这些开销差别会很大，因此在选择数据结构的时候需要针对需要的操作去选择
* 不同的数据结构在使用内存管理器（内存操作影响性能）的方式上也有区别
* 有的结构体没有优秀的本地缓存化（缓存会提高性能）

### 1.7 提高并发性能

* 提高并发性对性能提升有很大帮助（前提是用好并发）

### 1.8 优化内存管理

* C++对内存管理提供了很多优秀的API

## 2. 影响优化的计算机行为

**针对计算机硬件的代码优化**

### 2.1 